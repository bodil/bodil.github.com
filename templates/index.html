<!DOCTYPE html>
<html>

<head>
    <title>{% block title %}{{ config.title }}{% endblock title %}</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta charset="utf-8" />
    <meta name="subject" content="{{ config.description }}" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="author" content="{{ config.extra.author }}" />
    <meta name="copyright" content="{{ config.extra.author }}" />
    <meta name="language" content="{{ config.default_language }}" />
    {% block meta %} {% endblock meta %} {% block favicon %}
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />
    {% endblock favicon %}
    <link rel="alternate" type="application/rss+xml" title="{{ config.title }}" href="/rss.xml" />
    <link rel="me" href="https://lol.camp/bodil" />
    <link rel="canonical" href="{{ current_url }}" />
    {% block css %}
    <link rel="stylesheet" href="/site.css" />
    <link rel="stylesheet" href="/print.css" media="print" />
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.64/dist/themes/light.css">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.64/dist/themes/dark.css">
    <script type="module"
        src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.0.0-beta.64/dist/shoelace.js"></script>
    {% endblock css %}

    <script type="text/javascript">
        function onSPJMode() {
            return function (event) {
                event.target.checked = !event.target.checked;
                window.localStorage.setItem("spj-mode", event.target.checked ? "true" : "false");
                updateTheme();
            };
        }

        function onDarkMode(value) {
            return function (event) {
                const light = document.getElementById("menu-light-mode");
                const dark = document.getElementById("menu-dark-mode");
                const system = document.getElementById("menu-system-mode");

                event.target.checked = true;
                if (event.target === light) {
                    window.localStorage.setItem("dark-mode", "false");
                } else {
                    light.checked = false;
                }
                if (event.target === dark) {
                    window.localStorage.setItem("dark-mode", "true");
                } else {
                    dark.checked = false;
                }
                if (event.target === system) {
                    window.localStorage.removeItem("dark-mode");
                } else {
                    system.checked = false;
                }

                updateTheme();
            };
        }

        function updateTheme() {
            const spj = window.localStorage.getItem("spj-mode") == "true";
            const darkValue = window.localStorage.getItem("dark-mode");
            const dark = darkValue === null ? window.matchMedia("(prefers-color-scheme: dark)").matches : darkValue == "true";

            document.body.classList[spj ? "add" : "remove"]("spj-mode");
            document.body.classList[dark ? "add" : "remove"]("sl-theme-dark");
        }

        window.onload = function () {
            document.getElementById("menu-light-mode").checked =
                window.localStorage.getItem("dark-mode") == "false";
            document.getElementById("menu-dark-mode").checked =
                window.localStorage.getItem("dark-mode") == "true";
            document.getElementById("menu-system-mode").checked =
                window.localStorage.getItem("dark-mode") === null;
            document.getElementById("menu-spj-mode").checked =
                window.localStorage.getItem("spj-mode") == "true";

            document.getElementById("menu-light-mode").onclick = onDarkMode("false");
            document.getElementById("menu-dark-mode").onclick = onDarkMode("true");
            document.getElementById("menu-system-mode").onclick = onDarkMode(null);
            document.getElementById("menu-spj-mode").onclick = onSPJMode();
        };
    </script>
    <!-- Matomo -->
    <script type="text/javascript">
        var _paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(["trackPageView"]);
        _paq.push(["enableLinkTracking"]);
        (function () {
            var u = "//tortuga.lol.camp/matomo/";
            _paq.push(["setTrackerUrl", u + "matomo.php"]);
            _paq.push(["setSiteId", "1"]);
            var d = document,
                g = d.createElement("script"),
                s = d.getElementsByTagName("script")[0];
            g.type = "text/javascript";
            g.async = true;
            g.defer = true;
            g.src = u + "matomo.js";
            s.parentNode.insertBefore(g, s);
        })();
    </script>
    <!-- End Matomo Code -->
</head>

<body>
    <script type="text/javascript">
        updateTheme();
    </script>
    <header class="no-print">
        <ul class="menu">
            <li class="menu-item">
                <a href="{{ config.base_url }}/contact/">Contact</a>
            </li>
            <li class="menu-item">
                <a href="https://github.com/bodil">GitHub</a>
            </li>
            <li class="menu-item">
                <a href="https://twitter.com/bodil">Twitter</a>
            </li>
            <!-- <li class="menu-item dropdown">
                <input id="settings-menu" type="checkbox" />
                <label class="dropdown-button" for="settings-menu">âš™</label>
                <ul>
                    <input type="checkbox" id="menu-dark-mode" />
                    <li onclick="document.getElementById('menu-dark-mode').click()">
                        Dark Mode
                    </li>
                    <input type="checkbox" id="menu-spj-mode" />
                    <li onclick="document.getElementById('menu-spj-mode').click()">
                        SPJ Mode
                    </li>
                </ul>
            </li> -->
            <li class="menu-item">
                <sl-dropdown placement="bottom-end" stay-open-on-select>
                    <sl-icon-button name="gear" label="Settings" slot="trigger" caret></sl-icon-button>
                    <sl-menu>
                        <sl-menu-item id="menu-light-mode">Light Mode</sl-menu-item>
                        <sl-menu-item id="menu-dark-mode">Dark Mode</sl-menu-item>
                        <sl-menu-item id="menu-system-mode">Follow System Theme</sl-menu-item>
                        <sl-divider></sl-divider>
                        <sl-menu-item id="menu-spj-mode">SPJ Mode</sl-menu-item>
                    </sl-menu>
                </sl-dropdown>
            </li>
        </ul>
        <h1><a href="{{ config.base_url }}">{{ config.title | safe }}</a></h1>
        <hr />
    </header>

    <main>
        {% block content %} {% if paginator.pages %} {% for page in paginator.pages %} {% if
        page.taxonomies.category is defined and page.taxonomies.category is
        containing("article") %}
        <article>
            <h2><a href="{{ page.permalink }}">{{ page.title | safe }}</a></h2>
            <div class="post-meta">
                {{ page.date | date(format="%F") }}
            </div>
            <p>
                {{ page.summary | safe }}
            </p>
            <div class="read-more">
                <a href="{{ page.permalink }}">ðŸ‘‰ Read</a>
            </div>
        </article>
        {% endif %} {% endfor %}
        <nav class="pagination">
            {% if paginator.previous %}
            <a class="previous" href="{{ paginator.previous }}">â€¹ Previous</a>
            {% endif %} {% if paginator.next %}
            <a class="next" href="{{ paginator.next }}">Next â€º</a>
            {% endif %}
        </nav>
        {% else %}
        <p>No articles found. Commencing scheduled entertainment:</p>
        <p class="video"><img src="/joe-and-monkey.gif" /></p>
        {% endif %} {% endblock content %}
    </main>

    <footer>
        <hr />
        <ul class="menu no-print">
            <li class="menu-item">
                <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">Licence</a>
            </li>
        </ul>
        <div class="print-only">
            This article by
            <a xmlns:cc="http://creativecommons.org/ns#" href="{{ config.base_url }}" property="cc:attributionName"
                rel="cc:attributionURL">{{ config.extra.author }}</a>
            is licensed under a
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons
                Attribution-NonCommercial-ShareAlike 4.0 International
                License</a>.
        </div>
    </footer>
</body>

</html>
